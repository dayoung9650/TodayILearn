# null 대신 Optional 클래스

토니 호어

> 구현하기 쉬었기 때문에 null을 도입했다.
>
> 십억 달러짜리 실수

Optional 이 생겨난 배경

이 책에서는 옵셔널을 너무 신격화하고 있는데, 분명 트레이드 오프가 있음

널을 감싸는 래퍼 클래스이기 때문에 비용이 발생한다.

null을 반환하면 오류가 발생할 가능성이 매우 높은 경우에 "결과 없음"을 명확하게 드러내기 위해 메소드의 반환 타입을 사용하도록 제한 설계 됨

370 쪽에 보험회사의 이름에 널 체크는 할 수 있지만, 보험회사에는 이름이 반드시 있어야 하므로 널 체크를 할 것이 아니라 값이 없는 상황이 우리 데이터에 문제가 있는 것인지 아니면 알고리즘의 버그인지 명확하게 구분할 수 있음

비지니스적인 고민 필요





옵셔널 사용하는 가장 큰 목적은 NPE 용이하게 하고자 나옴

타 언어에서는 안전 내비게이션 연산자가 존재하고 자바7 에서도 채택하려고 했지만 채택되지 못했음

성식 책임님이 생각하시는 핵심 p 377

> 자바 언어 아키텍트인 브라이언 고츠는 optional의 용도가 선택형 반환값을 지원하는 것이라고 명확하게 못박았다.
>
> optinal 클래스는 필드 형식으로 사용할 것을 가정하지 않았으므로 Serializable 인터페이스를 구현하지 않는다.
>
> 직렬화 모델이 필요하다면 다음 에제에서 보여주는 것처럼 optional 로 값을 반환받을 수 있는 메소드를 추가하는 방식을 권장한다.

orElseGet